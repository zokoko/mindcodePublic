import{d as O,r as b,o as x,a as R,b as c,c as v,e,f as J,F as L,g as T,t as g,h as I,_ as W,n as P,w as S,v as N,i as j,j as q,k as K,l as A,m as Q,p as H,q as X,u as Y,s as Z,x as z,y as F,z as le,A as ne}from"./index-e592ccd6.js";const ae={class:"file-browser"},ie={class:"path-nav"},de=["onClick"],re={key:0,class:"file-list"},ue=["onClick"],ce={class:"icon"},ve={class:"name"},pe={key:0,class:"file-actions"},me=["onClick"],fe={key:1,class:"empty-state"},ge=O({__name:"FileSync",props:{ws:{}},setup(V){const l=V,o=b(""),d=b([]),f=b([]),n=m=>{if(!m){f.value=[];return}f.value=m.replace(/^\/|\/$/g,"").split("/").filter(Boolean)},s=m=>{l.ws&&(console.log("加载目录:",m),o.value=m||"",n(o.value),l.ws.send(JSON.stringify({type:"open-feature",feature:"files",path:m||""})))},_=m=>{m.type==="directory"?s(m.path):l.ws&&l.ws.send(JSON.stringify({type:"getFileContent",path:m.fullPath}))},k=m=>{let i="";m>=0&&(i=f.value.slice(0,m+1).join("/")),console.log("导航到路径:",i),s(i||void 0)},r=m=>{try{const i=m.detail;if(console.log("收到消息:",i),i.type==="files-list"&&i.data)Array.isArray(i.data.entries)?(d.value=i.data.entries.map(p=>({name:p.name,path:p.path,fullPath:p.fullPath,type:p.type})),o.value=i.data.current||"",n(o.value),console.log("更新后的路径:",{current:o.value,parts:f.value,entries:d.value})):(d.value=[],console.warn("文件列表为空或格式不正确"));else if(i.type==="file-content"){if(i.content===void 0){console.error("文件内容为空:",i);return}window.dispatchEvent(new CustomEvent("load-git-tree",{detail:{type:"local",mode:"local",repoInfo:{isLocalFile:!0,owner:"local",repo:i.path.split("/")[0]||"workspace"},files:d.value.map(p=>({name:p.name,path:p.path,type:p.type==="directory"?"dir":"file",fullPath:p.fullPath,content:i.path===p.fullPath?i.content:void 0,isLocal:!0})),currentPath:o.value,localContent:i.content}})),console.log("文件内容已加载:",{path:i.path,contentLength:i.content.length})}}catch(i){console.error("处理消息错误:",i)}},y=m=>{l.ws&&(window.dispatchEvent(new CustomEvent("load-git-tree",{detail:{type:"local",mode:"local",repoInfo:{isLocalFile:!0,owner:"local",repo:"workspace"},files:d.value.map(i=>({name:i.name,path:i.path,type:i.type==="directory"?"dir":"file",fullPath:i.fullPath,isLocal:!0})),currentPath:o.value}})),l.ws.send(JSON.stringify({type:"watch",path:m.fullPath})))},w=()=>{l.ws&&window.dispatchEvent(new CustomEvent("load-git-tree",{detail:{type:"local",mode:"local",repoInfo:{isLocalFile:!0,owner:"local",repo:"workspace"},files:d.value.map(m=>({name:m.name,path:m.path,type:m.type==="directory"?"dir":"file",fullPath:m.fullPath,isLocal:!0})),currentPath:o.value}}))};return x(()=>{window.addEventListener("bridge-message",r),s()}),R(()=>{window.removeEventListener("bridge-message",r)}),(m,i)=>(c(),v("div",ae,[e("div",{class:"browser-header"},[i[2]||(i[2]=e("div",{class:"header-title"},[e("h3",null,"文件同步")],-1)),e("div",{class:"header-actions"},[e("button",{class:"open-editor-btn",title:"在编辑器中打开",onClick:w},i[1]||(i[1]=[e("span",{class:"icon"},"📝",-1),J(" 在编辑器中打开 ")]))])]),e("div",ie,[e("span",{class:"path-part root",onClick:i[0]||(i[0]=p=>k(-1))}," 根目录 / "),(c(!0),v(L,null,T(f.value,(p,h)=>(c(),v("span",{key:h,class:"path-part",onClick:U=>k(h)},g(p)+" "+g(h<f.value.length-1?"/":""),9,de))),128))]),d.value.length>0?(c(),v("div",re,[(c(!0),v(L,null,T(d.value,p=>(c(),v("div",{key:p.path,class:"file-item"},[e("div",{class:"file-info",onClick:h=>_(p)},[e("span",ce,g(p.type==="directory"?"📁":"📄"),1),e("span",ve,g(p.name),1)],8,ue),p.type==="file"?(c(),v("div",pe,[e("button",{class:"action-btn",title:"在编辑器中打开",onClick:h=>y(p)},i[3]||(i[3]=[e("span",{class:"action-icon"},"📝",-1)]),8,me)])):I("",!0)]))),128))])):(c(),v("div",fe,g(o.value?"当前目录为空":"加载中..."),1))]))}});const _e=W(ge,[["__scopeId","data-v-09353dc7"]]),be={class:"terminal"},ye=["innerHTML"],he={class:"terminal-input"},ke=["disabled"],we=O({__name:"Terminal",props:{ws:{}},setup(V){const l=V,o=b(""),d=b([]),f=b(!1),n=b(null),s=y=>y.replace(/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]/g,""),_=()=>{var y;o.value.trim()&&((y=l.ws)==null||y.send(JSON.stringify({type:"terminal-command",command:o.value})),d.value.push({type:"command",text:`$ ${o.value}`}),o.value="",r())},k=y=>{const w=y.detail;w.type==="terminal-output"?(d.value.push({type:"output",text:w.text}),r()):w.type==="terminal-ready"&&(f.value=!0,d.value.push({type:"system",text:"终端已就绪"}))},r=async()=>{await q(),n.value&&(n.value.scrollTop=n.value.scrollHeight)};return x(()=>{window.addEventListener("bridge-message",k)}),R(()=>{window.removeEventListener("bridge-message",k)}),(y,w)=>(c(),v("div",be,[e("div",{class:"terminal-output",ref_key:"outputRef",ref:n},[(c(!0),v(L,null,T(d.value,(m,i)=>(c(),v("div",{key:i,class:P(m.type),innerHTML:s(m.text)},null,10,ye))),128))],512),e("div",he,[w[1]||(w[1]=e("span",{class:"prompt"},"$",-1)),S(e("input",{"onUpdate:modelValue":w[0]||(w[0]=m=>o.value=m),onKeyup:j(_,["enter"]),disabled:!f.value,placeholder:"输入命令..."},null,40,ke),[[N,o.value]])])]))}});const Ce=W(we,[["__scopeId","data-v-a5ff1ada"]]),$e={class:"debug-panel"},Se={class:"toolbar"},Me=["disabled"],Pe=["disabled"],Ve=["disabled"],Ee=["disabled"],Le=["disabled"],Te={class:"debug-content"},Ue={class:"variables"},Ie={class:"var-list"},Be={class:"var-name"},Ne={class:"var-value"},Oe={class:"callstack"},We={class:"stack-list"},xe=O({__name:"DebugPanel",setup(V){return(l,o)=>(c(),v("div",$e,[e("div",Se,[e("button",{onClick:o[0]||(o[0]=(...d)=>l.startDebug&&l.startDebug(...d)),disabled:l.isDebugging},"启动调试",8,Me),e("button",{onClick:o[1]||(o[1]=(...d)=>l.stopDebug&&l.stopDebug(...d)),disabled:!l.isDebugging},"停止调试",8,Pe),e("button",{onClick:o[2]||(o[2]=(...d)=>l.continueDebug&&l.continueDebug(...d)),disabled:!l.isPaused},"继续",8,Ve),e("button",{onClick:o[3]||(o[3]=(...d)=>l.stepOver&&l.stepOver(...d)),disabled:!l.isPaused},"单步跳过",8,Ee),e("button",{onClick:o[4]||(o[4]=(...d)=>l.stepInto&&l.stepInto(...d)),disabled:!l.isPaused},"单步进入",8,Le)]),e("div",Te,[e("div",Ue,[o[5]||(o[5]=e("h4",null,"变量",-1)),e("div",Ie,[(c(!0),v(L,null,T(l.variables,(d,f)=>(c(),v("div",{key:f,class:"var-item"},[e("span",Be,g(f)+":",1),e("span",Ne,g(d),1)]))),128))])]),e("div",Oe,[o[6]||(o[6]=e("h4",null,"调用栈",-1)),e("div",We,[(c(!0),v(L,null,T(l.callstack,(d,f)=>(c(),v("div",{key:f,class:"stack-item"},g(d.name)+" ("+g(d.file)+":"+g(d.line)+") ",1))),128))])])])]))}});const De=W(xe,[["__scopeId","data-v-2a1a0dd3"]]),Fe={class:"git-panel"},Je={class:"toolbar"},Re=["disabled"],Ae=["disabled"],He={key:0,class:"changes"},Ge={class:"change-list"},Ke={class:"status"},ze={class:"file"},je={class:"checkbox"},qe=["onUpdate:modelValue"],Qe={key:1,class:"commit-form"},Xe={class:"form-actions"},Ye=["disabled"],Ze={class:"branch-info"},et={class:"branch"},tt=O({__name:"GitPanel",props:{ws:{}},setup(V){const l=V,o=b([]),d=b("main"),f=b(0),n=b(!1),s=b(""),_=K(()=>o.value.length>0),k=K(()=>o.value.some($=>$.staged)),r=$=>({modified:"修改",added:"新增",deleted:"删除",renamed:"重命名"})[$]||$,y=($,C={})=>{var M;(M=l.ws)==null||M.send(JSON.stringify({type:"git-command",command:$,args:C}))},w=()=>y("status"),m=()=>n.value=!0,i=()=>y("push"),p=()=>y("pull"),h=()=>{y("commit",{message:s.value,files:o.value.filter($=>$.staged).map($=>$.file)}),n.value=!1,s.value=""},U=()=>{n.value=!1,s.value=""},B=$=>{const C=$.detail;C.type==="git-status"&&(o.value=C.changes,d.value=C.branch,f.value=C.behind)};return x(()=>{window.addEventListener("bridge-message",B),w()}),R(()=>{window.removeEventListener("bridge-message",B)}),($,C)=>(c(),v("div",Fe,[e("div",Je,[e("button",{onClick:w},"刷新"),e("button",{onClick:m,disabled:!_.value},"提交",8,Re),e("button",{onClick:i,disabled:!k.value},"推送",8,Ae),e("button",{onClick:p},"拉取")]),_.value?(c(),v("div",He,[C[1]||(C[1]=e("h4",null,"更改",-1)),e("div",Ge,[(c(!0),v(L,null,T(o.value,M=>(c(),v("div",{key:M.file,class:P(["change-item",M.status])},[e("span",Ke,g(r(M.status)),1),e("span",ze,g(M.file),1),e("label",je,[S(e("input",{type:"checkbox","onUpdate:modelValue":D=>M.staged=D},null,8,qe),[[A,M.staged]])])],2))),128))])])):I("",!0),n.value?(c(),v("div",Qe,[S(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=M=>s.value=M),placeholder:"输入提交信息...",rows:"3"},null,512),[[N,s.value]]),e("div",Xe,[e("button",{onClick:U},"取消"),e("button",{onClick:h,disabled:!s.value.trim()}," 确认提交 ",8,Ye)])])):I("",!0),e("div",Ze,[e("span",et,g(d.value),1),e("span",{class:P(["sync-status",{behind:f.value>0}])},g(f.value?`落后 ${f.value} 个提交`:"已同步"),3)])]))}});const st=W(tt,[["__scopeId","data-v-ecdf0bc8"]]),ot={class:"copilot-panel"},lt={class:"chat-container"},nt={class:"avatar"},at={class:"content"},it={key:0,class:"code-block"},dt=["innerHTML"],rt={class:"input-area"},ut={class:"context-selector"},ct={class:"editor"},vt=["placeholder","onKeydown"],pt={class:"actions"},mt=["disabled"],ft=O({__name:"CopilotPanel",props:{ws:{}},setup(V){const l=V,o=b(""),d=b("chat"),f=b(null),n=b([]);let s=0;const _=()=>({chat:"输入问题或描述...",completion:"输入代码前缀，AI将帮你完成...",explain:"粘贴需要解释的代码...",refactor:"粘贴需要重构的代码..."})[d.value],k=i=>i.replace(/\n/g,"<br>"),r=async()=>{await q(),f.value&&(f.value.scrollTop=f.value.scrollHeight)},y=()=>{var p;if(!o.value.trim())return;const i={id:++s,role:"user",content:o.value};n.value.push(i),(p=l.ws)==null||p.send(JSON.stringify({type:"copilot-request",context:d.value,content:o.value})),o.value="",r()},w=()=>{n.value=[]},m=i=>{const p=i.detail;p.type==="copilot-response"&&(n.value.push({id:++s,role:"assistant",content:p.content,code:p.code}),r())};return x(()=>{window.addEventListener("bridge-message",m)}),R(()=>{window.removeEventListener("bridge-message",m)}),(i,p)=>(c(),v("div",ot,[e("div",lt,[e("div",{class:"messages",ref_key:"messagesRef",ref:f},[(c(!0),v(L,null,T(n.value,h=>(c(),v("div",{key:h.id,class:P(["message",h.role])},[e("div",nt,g(h.role==="user"?"👤":"🤖"),1),e("div",at,[h.code?(c(),v("pre",it,g(h.code),1)):(c(),v("div",{key:1,class:"text",innerHTML:k(h.content)},null,8,dt))])],2))),128))],512)]),e("div",rt,[e("div",ut,[S(e("select",{"onUpdate:modelValue":p[0]||(p[0]=h=>d.value=h)},p[2]||(p[2]=[e("option",{value:"chat"},"普通对话",-1),e("option",{value:"completion"},"代码补全",-1),e("option",{value:"explain"},"代码解释",-1),e("option",{value:"refactor"},"代码重构",-1)]),512),[[Q,d.value]])]),e("div",ct,[S(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=h=>o.value=h),placeholder:_(),onKeydown:j(H(y,["ctrl"]),["enter"])},null,40,vt),[[N,o.value]])]),e("div",pt,[e("button",{onClick:w},"清空对话"),e("button",{onClick:y,disabled:!o.value.trim()}," 发送 (Ctrl+Enter) ",8,mt)])])]))}});const gt=W(ft,[["__scopeId","data-v-540de0af"]]),_t={class:"vscode-bridge"},bt={class:"bridge-header"},yt={class:"bridge-content"},ht={class:"main-grid"},kt={class:"left-panel"},wt={class:"features-panel card"},Ct={class:"features-grid compact"},$t={key:0,class:"feature-panel card"},St={class:"feature-header"},Mt={key:1,class:"connection-log card"},Pt={class:"log-content"},Vt={class:"right-panel"},Et={class:"setup-guide card"},Lt={class:"download-section compact"},Tt={class:"connection-settings card"},Ut={class:"connection-mode"},It=["disabled"],Bt=["disabled"],Nt={key:0,class:"form-group"},Ot={class:"input-group"},Wt=["disabled"],xt=["disabled"],Dt={key:1,class:"form-group"},Ft=["disabled"],Jt=["disabled"],Rt={key:0,class:"vscode-select"},At=["value"],Ht={class:"form-group"},Gt=["disabled"],Kt={class:"settings-grid"},zt={class:"form-group checkbox"},jt={class:"form-group checkbox"},qt={class:"action-buttons"},Qt=["disabled"],Xt=["disabled"],Yt=O({__name:"VSCodeBridge",setup(V){const l=b(!1),o=b(!1),d=b(!0),f=b([]),n=(a,t="info")=>{f.value.unshift({type:t,message:a}),f.value.length>50&&f.value.pop()};let s=null;const _=b({files:!1,terminal:!1,debug:!1,git:!1,copilot:!1}),k=b(null),r=b({wsUrl:"ws://192.168.31.97:3008",port:3008,autoConnect:!1,ssl:!1,remoteMode:!1,remoteUrl:"ws://coder.zokoko.cn/ws",remoteToken:"mindcode-admin-2024",targetVSCode:""}),y=b([]),w=()=>{s&&s.send(JSON.stringify({type:"get-vscode-list"}))},m=async()=>{if(!r.value.remoteUrl||!r.value.remoteToken){n("请输入远程地址和访问令牌","error");return}o.value=!0,n("正在连接远程服务...");try{const a=`mobile-${Math.random().toString(36).slice(2,9)}`,t=new URL(r.value.remoteUrl);t.searchParams.append("clientId",a),t.searchParams.append("token",r.value.remoteToken),s=new WebSocket(t.toString()),s.addEventListener("open",()=>{console.log("WebSocket连接已打开"),n("连接成功，等待认证...","info"),s.send(JSON.stringify({type:"auth",clientId:a,token:r.value.remoteToken}))}),s.addEventListener("message",u=>{try{const E=JSON.parse(u.data);switch(console.log("收到服务器消息:",E),E.type){case"auth-success":l.value=!0,o.value=!1,n("认证成功","success"),w();break;case"auth-failed":n(`认证失败: ${E.message}`,"error"),s==null||s.close();break;case"vscode-list":y.value=E.instances||[],y.value.length>0&&n(`发现 ${y.value.length} 个VSCode实例`);break;case"file-content":case"files-list":case"terminal-output":window.dispatchEvent(new CustomEvent("bridge-message",{detail:E}));break;case"error":n(E.message,"error");break}}catch(E){console.error("消息处理错误:",E)}}),s.addEventListener("close",()=>{l.value=!1,o.value=!1,s=null,n("连接已断开","warn")}),s.addEventListener("error",u=>{console.error("WebSocket错误:",u),n("连接错误: "+(u.message||"未知错误"),"error"),o.value=!1})}catch(a){console.error("连接失败:",a),n(`连接失败: ${a.message}`,"error"),o.value=!1}},i=async()=>{try{if(r.value.remoteMode){const a=new WebSocket(r.value.remoteUrl);a.onopen=()=>{n("远程服务器连接测试成功","success"),a.close()},a.onerror=()=>{n("远程服务器连接测试失败","error")}}else{const a=new WebSocket(r.value.wsUrl);a.onopen=()=>{n("本地服务器连接测试成功","success"),a.close()},a.onerror=()=>{n("本地服务器连接测试失败","error")}}}catch(a){n(`连接测试失败: ${a.message}`,"error")}},p=()=>{l.value?ee():r.value.remoteMode?m():h()},h=()=>{if(!s){o.value=!0,n("正在连接...");try{let a=r.value.wsUrl;!a.startsWith("ws://")&&!a.startsWith("wss://")&&(a=`ws://${a}`),s=new WebSocket(a);const t=setTimeout(()=>{(s==null?void 0:s.readyState)!==WebSocket.OPEN&&(s==null||s.close(),s=null,o.value=!1,n("连接超时","error"))},1e4);s.onopen=()=>{clearTimeout(t),l.value=!0,o.value=!1,n("连接成功","success"),s.send(JSON.stringify({type:"init",client:"mobile",clientId:`mobile-${Math.random().toString(36).slice(2,9)}`})),M()},s.onclose=u=>{clearTimeout(t),D(),l.value=!1,o.value=!1,s=null,n(`连接已断开 (code: ${u.code})`,"warn"),r.value.autoConnect&&!isManualClose&&setTimeout(()=>{l.value||h()},5e3)},s.onerror=u=>{n(`连接错误: ${u}`,"error")},s.onmessage=te}catch(a){n(`连接失败: ${a.message}`,"error"),o.value=!1,s=null}}},U=a=>{if(!l.value||!s){n("请先连接 Bridge 服务","warn");return}if(r.value.remoteMode&&!r.value.targetVSCode){n("请先选择一个VSCode实例","warn");return}k.value&&B({type:"close-feature",feature:k.value}),k.value=a,B({type:"open-feature",feature:a}),n(`正在打开 ${a} 功能...`)},B=a=>{if(console.log("发送消息0:",a),!s||s.readyState!==WebSocket.OPEN){n("WebSocket未连接","error");return}try{const t={...a,source:r.value.remoteMode?"remote":"local"};r.value.remoteMode?s.send(JSON.stringify({type:"message",targetId:r.value.targetVSCode,payload:t})):s.send(JSON.stringify(t)),console.log("发送消息1:",t)}catch(t){n(`发送消息失败: ${t.message}`,"error")}},$=a=>{B(a)};let C=null;const M=()=>{D(),C=window.setInterval(()=>{B({type:"ping"})},3e4)},D=()=>{C&&(clearInterval(C),C=null)},ee=()=>{s&&(isManualClose=!0,D(),s.close(),s=null,l.value=!1,n("已断开连接"))},te=a=>{try{const t=JSON.parse(a.data);switch(t.type){case"pong":break;case"ready":_.value=t.features||{},n("服务器就绪","success");break;case"error":n(t.message,"error");break;case"files-list":case"file-content":case"terminal-output":case"debug-event":window.dispatchEvent(new CustomEvent("bridge-message",{detail:t}));break}}catch(t){console.error("消息处理错误:",t)}},se=a=>({files:"文件同步",terminal:"终端访问",debug:"断点调试",git:"Git操作",copilot:"AI 助手"})[a]||"",G=a=>({files:F(_e),terminal:F(Ce),debug:F(De),git:F(st),copilot:F(gt)})[a]||null,oe=()=>{k.value&&s&&s.send(JSON.stringify({type:"close-feature",feature:k.value})),k.value=null};return x(()=>{window.addEventListener("ws-message",a=>{s&&s.readyState===WebSocket.OPEN?(console.log("发送WebSocket消息:",a.detail),s.send(JSON.stringify(a.detail))):(console.warn("WebSocket未连接，无法发送消息"),n("WebSocket未连接，无法发送消息","warn"))}),r.value.autoConnect&&h()}),R(()=>{s&&s.close()}),(a,t)=>(c(),v("div",_t,[e("div",bt,[t[17]||(t[17]=e("h2",null,"VSCode 助手",-1)),e("div",{class:P(["connection-status",{connected:l.value}])},g(l.value?"已连接":"未连接"),3)]),e("div",yt,[e("div",ht,[e("div",kt,[e("div",wt,[t[28]||(t[28]=e("h3",null,"可用功能",-1)),e("div",Ct,[e("div",{class:"feature-item",onClick:t[0]||(t[0]=u=>U("files"))},[t[18]||(t[18]=e("div",{class:"feature-icon"},"📁",-1)),t[19]||(t[19]=e("div",{class:"feature-info"},[e("h4",null,"文件同步"),e("p",null,"实时同步本地文件")],-1)),e("div",{class:P(["feature-status",{active:_.value.files}])},g(_.value.files?"已同步":"未同步"),3)]),e("div",{class:"feature-item",onClick:t[1]||(t[1]=u=>U("terminal"))},[t[20]||(t[20]=e("div",{class:"feature-icon"},"💻",-1)),t[21]||(t[21]=e("div",{class:"feature-info"},[e("h4",null,"终端访问"),e("p",null,"远程执行命令")],-1)),e("div",{class:P(["feature-status",{active:_.value.terminal}])},g(_.value.terminal?"已连接":"未连接"),3)]),e("div",{class:"feature-item",onClick:t[2]||(t[2]=u=>U("debug"))},[t[22]||(t[22]=e("div",{class:"feature-icon"},"🔍",-1)),t[23]||(t[23]=e("div",{class:"feature-info"},[e("h4",null,"断点调试"),e("p",null,"远程调试支持")],-1)),e("div",{class:P(["feature-status",{active:_.value.debug}])},g(_.value.debug?"已就绪":"未启用"),3)]),e("div",{class:"feature-item",onClick:t[3]||(t[3]=u=>U("git"))},[t[24]||(t[24]=e("div",{class:"feature-icon"},"📦",-1)),t[25]||(t[25]=e("div",{class:"feature-info"},[e("h4",null,"Git 操作"),e("p",null,"版本控制管理")],-1)),e("div",{class:P(["feature-status",{active:_.value.git}])},g(_.value.git?"已连接":"未连接"),3)]),e("div",{class:"feature-item",onClick:t[4]||(t[4]=u=>U("copilot"))},[t[26]||(t[26]=e("div",{class:"feature-icon"},"🤖",-1)),t[27]||(t[27]=e("div",{class:"feature-info"},[e("h4",null,"AI 助手"),e("p",null,"使用 VSCode AI 辅助编程")],-1)),e("div",{class:P(["feature-status",{active:_.value.copilot}])},g(_.value.copilot?"已连接":"未连接"),3)])])]),k.value?(c(),v("div",$t,[e("div",St,[e("h3",null,g(se(k.value)),1),e("button",{class:"close-btn",onClick:oe},"×")]),G(k.value)?(c(),X(Z(G(k.value)),{key:0,ws:Y(s),onMessage:$},null,40,["ws"])):I("",!0)])):I("",!0),d.value?(c(),v("div",Mt,[t[29]||(t[29]=e("h3",null,"连接日志",-1)),e("div",Pt,[(c(!0),v(L,null,T(f.value,(u,E)=>(c(),v("div",{key:E,class:P(u.type)},g(u.message),3))),128))])])):I("",!0)]),e("div",Vt,[e("div",Et,[t[30]||(t[30]=e("h3",null,"设置指南",-1)),t[31]||(t[31]=e("div",{class:"guide-steps compact"},[e("ol",null,[e("li",null,"下载并安装 MindCode Bridge 桌面程序"),e("li",null,"运行 MindCode Bridge 程序（建议监听 0.0.0.0 或本机局域网IP）"),e("li",null,"在VSCode中安装 MindCode Bridge 插件"),e("li",null,"确保本地Bridge服务正在运行（默认端口3008）"),e("li",null,"手机和电脑需在同一WiFi/局域网下")])],-1)),e("div",Lt,[e("a",{href:"#",class:"download-btn",onClick:t[5]||(t[5]=H((...u)=>a.downloadBridge&&a.downloadBridge(...u),["prevent"]))}," 下载 Bridge 程序 "),e("a",{href:"#",class:"download-btn",onClick:t[6]||(t[6]=H((...u)=>a.downloadVSCodeExt&&a.downloadVSCodeExt(...u),["prevent"]))}," 获取 VSCode 插件 ")])]),e("div",Tt,[t[42]||(t[42]=e("h3",null,"连接配置",-1)),e("div",Ut,[e("label",null,[S(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=u=>r.value.remoteMode=u),value:!1,disabled:l.value},null,8,It),[[z,r.value.remoteMode]]),t[32]||(t[32]=J(" 局域网连接 "))]),e("label",null,[S(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=u=>r.value.remoteMode=u),value:!0,disabled:l.value},null,8,Bt),[[z,r.value.remoteMode]]),t[33]||(t[33]=J(" 远程连接 "))])]),r.value.remoteMode?(c(),v("div",Dt,[t[37]||(t[37]=e("label",null,"远程服务地址",-1)),S(e("input",{"onUpdate:modelValue":t[11]||(t[11]=u=>r.value.remoteUrl=u),placeholder:"wss://your-remote-server.com",disabled:l.value},null,8,Ft),[[N,r.value.remoteUrl]]),t[38]||(t[38]=e("label",null,"访问令牌",-1)),S(e("input",{"onUpdate:modelValue":t[12]||(t[12]=u=>r.value.remoteToken=u),type:"password",placeholder:"输入访问令牌",disabled:l.value},null,8,Jt),[[N,r.value.remoteToken]]),y.value.length>0?(c(),v("div",Rt,[t[36]||(t[36]=e("label",null,"选择VSCode实例",-1)),S(e("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>r.value.targetVSCode=u)},[t[35]||(t[35]=e("option",{value:""},"请选择VSCode实例",-1)),(c(!0),v(L,null,T(y.value,u=>(c(),v("option",{key:u.id,value:u.id},g(u.name),9,At))),128))],512),[[Q,r.value.targetVSCode]])])):I("",!0)])):(c(),v("div",Nt,[t[34]||(t[34]=e("label",null,"WebSocket 地址",-1)),e("div",Ot,[S(e("input",{"onUpdate:modelValue":t[9]||(t[9]=u=>r.value.wsUrl=u),placeholder:"ws://192.168.31.97:3008",disabled:l.value},null,8,Wt),[[N,r.value.wsUrl]]),e("button",{class:"scan-btn",onClick:t[10]||(t[10]=(...u)=>a.scanNetwork&&a.scanNetwork(...u)),disabled:l.value}," 扫描 ",8,xt)])])),e("div",Ht,[t[39]||(t[39]=e("label",null,"端口",-1)),S(e("input",{"onUpdate:modelValue":t[14]||(t[14]=u=>r.value.port=u),type:"number",disabled:l.value},null,8,Gt),[[N,r.value.port]])]),e("div",Kt,[e("div",zt,[e("label",null,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=u=>r.value.autoConnect=u)},null,512),[[A,r.value.autoConnect]]),t[40]||(t[40]=J(" 自动连接 "))])]),e("div",jt,[e("label",null,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=u=>r.value.ssl=u)},null,512),[[A,r.value.ssl]]),t[41]||(t[41]=J(" 使用 SSL "))])])]),e("div",qt,[e("button",{class:"test-btn",onClick:i,disabled:l.value||o.value}," 测试连接 ",8,Qt),e("button",{class:P(["connect-btn",{connecting:o.value}]),onClick:p,disabled:o.value},g(l.value?"断开连接":o.value?"连接中...":"连接"),11,Xt)])])])])])]))}});const Zt=W(Yt,[["__scopeId","data-v-25a44558"]]),es={class:"plugin-detail"},ts={key:1},ss={class:"content"},os={class:"plugin-header"},ls={class:"plugin-icon"},ns={class:"plugin-info"},as={class:"version"},is={class:"description"},ds=O({__name:"PluginDetail",setup(V){const l=ne(),o=le(),d=b(null),f=b(null),n={"vscode-bridge":Zt};return x(async()=>{var _;const s={"vscode-bridge":{id:"vscode-bridge",name:"VSCode Bridge",version:"1.0.0",description:"通过本地Bridge服务连接VSCode",icon:"🔗",component:"vscode-bridge"}};d.value=s[o.params.id],(_=d.value)!=null&&_.component&&(f.value=n[d.value.component])}),(s,_)=>(c(),v("div",es,[e("div",{class:"back",onClick:_[0]||(_[0]=k=>Y(l).back())},_[1]||(_[1]=[e("span",null,"← 返回",-1)])),d.value?(c(),v(L,{key:0},[f.value?(c(),X(Z(f.value),{key:0})):(c(),v("div",ts,[e("h2",null,g(d.value.name),1),e("div",ss,[e("div",os,[e("div",ls,g(d.value.icon),1),e("div",ns,[e("span",as,"v"+g(d.value.version),1),e("p",is,g(d.value.description),1)])])])]))],64)):I("",!0)]))}});const us=W(ds,[["__scopeId","data-v-96af3f17"]]);export{us as default};
