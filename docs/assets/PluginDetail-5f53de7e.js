import{d as O,r as b,o as x,a as R,b as c,c as v,e,f as J,F as L,g as T,t as g,h as I,_ as W,n as P,w as S,v as N,i as j,j as q,k as K,l as A,m as Q,p as H,q as X,u as Y,s as Z,x as z,y as F,z as le,A as ne}from"./index-e592ccd6.js";const ae={class:"file-browser"},ie={class:"path-nav"},de=["onClick"],re={key:0,class:"file-list"},ue=["onClick"],ce={class:"icon"},ve={class:"name"},pe={key:0,class:"file-actions"},me=["onClick"],fe={key:1,class:"empty-state"},ge=O({__name:"FileSync",props:{ws:{}},setup(V){const l=V,o=b(""),d=b([]),f=b([]),n=m=>{if(!m){f.value=[];return}f.value=m.replace(/^\/|\/$/g,"").split("/").filter(Boolean)},s=m=>{l.ws&&(console.log("åŠ è½½ç›®å½•:",m),o.value=m||"",n(o.value),l.ws.send(JSON.stringify({type:"open-feature",feature:"files",path:m||""})))},_=m=>{m.type==="directory"?s(m.path):l.ws&&l.ws.send(JSON.stringify({type:"getFileContent",path:m.fullPath}))},k=m=>{let i="";m>=0&&(i=f.value.slice(0,m+1).join("/")),console.log("å¯¼èˆªåˆ°è·¯å¾„:",i),s(i||void 0)},r=m=>{try{const i=m.detail;if(console.log("æ”¶åˆ°æ¶ˆæ¯:",i),i.type==="files-list"&&i.data)Array.isArray(i.data.entries)?(d.value=i.data.entries.map(p=>({name:p.name,path:p.path,fullPath:p.fullPath,type:p.type})),o.value=i.data.current||"",n(o.value),console.log("æ›´æ–°åçš„è·¯å¾„:",{current:o.value,parts:f.value,entries:d.value})):(d.value=[],console.warn("æ–‡ä»¶åˆ—è¡¨ä¸ºç©ºæˆ–æ ¼å¼ä¸æ­£ç¡®"));else if(i.type==="file-content"){if(i.content===void 0){console.error("æ–‡ä»¶å†…å®¹ä¸ºç©º:",i);return}window.dispatchEvent(new CustomEvent("load-git-tree",{detail:{type:"local",mode:"local",repoInfo:{isLocalFile:!0,owner:"local",repo:i.path.split("/")[0]||"workspace"},files:d.value.map(p=>({name:p.name,path:p.path,type:p.type==="directory"?"dir":"file",fullPath:p.fullPath,content:i.path===p.fullPath?i.content:void 0,isLocal:!0})),currentPath:o.value,localContent:i.content}})),console.log("æ–‡ä»¶å†…å®¹å·²åŠ è½½:",{path:i.path,contentLength:i.content.length})}}catch(i){console.error("å¤„ç†æ¶ˆæ¯é”™è¯¯:",i)}},y=m=>{l.ws&&(window.dispatchEvent(new CustomEvent("load-git-tree",{detail:{type:"local",mode:"local",repoInfo:{isLocalFile:!0,owner:"local",repo:"workspace"},files:d.value.map(i=>({name:i.name,path:i.path,type:i.type==="directory"?"dir":"file",fullPath:i.fullPath,isLocal:!0})),currentPath:o.value}})),l.ws.send(JSON.stringify({type:"watch",path:m.fullPath})))},w=()=>{l.ws&&window.dispatchEvent(new CustomEvent("load-git-tree",{detail:{type:"local",mode:"local",repoInfo:{isLocalFile:!0,owner:"local",repo:"workspace"},files:d.value.map(m=>({name:m.name,path:m.path,type:m.type==="directory"?"dir":"file",fullPath:m.fullPath,isLocal:!0})),currentPath:o.value}}))};return x(()=>{window.addEventListener("bridge-message",r),s()}),R(()=>{window.removeEventListener("bridge-message",r)}),(m,i)=>(c(),v("div",ae,[e("div",{class:"browser-header"},[i[2]||(i[2]=e("div",{class:"header-title"},[e("h3",null,"æ–‡ä»¶åŒæ­¥")],-1)),e("div",{class:"header-actions"},[e("button",{class:"open-editor-btn",title:"åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€",onClick:w},i[1]||(i[1]=[e("span",{class:"icon"},"ğŸ“",-1),J(" åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ ")]))])]),e("div",ie,[e("span",{class:"path-part root",onClick:i[0]||(i[0]=p=>k(-1))}," æ ¹ç›®å½• / "),(c(!0),v(L,null,T(f.value,(p,h)=>(c(),v("span",{key:h,class:"path-part",onClick:U=>k(h)},g(p)+" "+g(h<f.value.length-1?"/":""),9,de))),128))]),d.value.length>0?(c(),v("div",re,[(c(!0),v(L,null,T(d.value,p=>(c(),v("div",{key:p.path,class:"file-item"},[e("div",{class:"file-info",onClick:h=>_(p)},[e("span",ce,g(p.type==="directory"?"ğŸ“":"ğŸ“„"),1),e("span",ve,g(p.name),1)],8,ue),p.type==="file"?(c(),v("div",pe,[e("button",{class:"action-btn",title:"åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€",onClick:h=>y(p)},i[3]||(i[3]=[e("span",{class:"action-icon"},"ğŸ“",-1)]),8,me)])):I("",!0)]))),128))])):(c(),v("div",fe,g(o.value?"å½“å‰ç›®å½•ä¸ºç©º":"åŠ è½½ä¸­..."),1))]))}});const _e=W(ge,[["__scopeId","data-v-09353dc7"]]),be={class:"terminal"},ye=["innerHTML"],he={class:"terminal-input"},ke=["disabled"],we=O({__name:"Terminal",props:{ws:{}},setup(V){const l=V,o=b(""),d=b([]),f=b(!1),n=b(null),s=y=>y.replace(/\x1B\[([0-9]{1,2}(;[0-9]{1,2})?)?[m|K]/g,""),_=()=>{var y;o.value.trim()&&((y=l.ws)==null||y.send(JSON.stringify({type:"terminal-command",command:o.value})),d.value.push({type:"command",text:`$ ${o.value}`}),o.value="",r())},k=y=>{const w=y.detail;w.type==="terminal-output"?(d.value.push({type:"output",text:w.text}),r()):w.type==="terminal-ready"&&(f.value=!0,d.value.push({type:"system",text:"ç»ˆç«¯å·²å°±ç»ª"}))},r=async()=>{await q(),n.value&&(n.value.scrollTop=n.value.scrollHeight)};return x(()=>{window.addEventListener("bridge-message",k)}),R(()=>{window.removeEventListener("bridge-message",k)}),(y,w)=>(c(),v("div",be,[e("div",{class:"terminal-output",ref_key:"outputRef",ref:n},[(c(!0),v(L,null,T(d.value,(m,i)=>(c(),v("div",{key:i,class:P(m.type),innerHTML:s(m.text)},null,10,ye))),128))],512),e("div",he,[w[1]||(w[1]=e("span",{class:"prompt"},"$",-1)),S(e("input",{"onUpdate:modelValue":w[0]||(w[0]=m=>o.value=m),onKeyup:j(_,["enter"]),disabled:!f.value,placeholder:"è¾“å…¥å‘½ä»¤..."},null,40,ke),[[N,o.value]])])]))}});const Ce=W(we,[["__scopeId","data-v-a5ff1ada"]]),$e={class:"debug-panel"},Se={class:"toolbar"},Me=["disabled"],Pe=["disabled"],Ve=["disabled"],Ee=["disabled"],Le=["disabled"],Te={class:"debug-content"},Ue={class:"variables"},Ie={class:"var-list"},Be={class:"var-name"},Ne={class:"var-value"},Oe={class:"callstack"},We={class:"stack-list"},xe=O({__name:"DebugPanel",setup(V){return(l,o)=>(c(),v("div",$e,[e("div",Se,[e("button",{onClick:o[0]||(o[0]=(...d)=>l.startDebug&&l.startDebug(...d)),disabled:l.isDebugging},"å¯åŠ¨è°ƒè¯•",8,Me),e("button",{onClick:o[1]||(o[1]=(...d)=>l.stopDebug&&l.stopDebug(...d)),disabled:!l.isDebugging},"åœæ­¢è°ƒè¯•",8,Pe),e("button",{onClick:o[2]||(o[2]=(...d)=>l.continueDebug&&l.continueDebug(...d)),disabled:!l.isPaused},"ç»§ç»­",8,Ve),e("button",{onClick:o[3]||(o[3]=(...d)=>l.stepOver&&l.stepOver(...d)),disabled:!l.isPaused},"å•æ­¥è·³è¿‡",8,Ee),e("button",{onClick:o[4]||(o[4]=(...d)=>l.stepInto&&l.stepInto(...d)),disabled:!l.isPaused},"å•æ­¥è¿›å…¥",8,Le)]),e("div",Te,[e("div",Ue,[o[5]||(o[5]=e("h4",null,"å˜é‡",-1)),e("div",Ie,[(c(!0),v(L,null,T(l.variables,(d,f)=>(c(),v("div",{key:f,class:"var-item"},[e("span",Be,g(f)+":",1),e("span",Ne,g(d),1)]))),128))])]),e("div",Oe,[o[6]||(o[6]=e("h4",null,"è°ƒç”¨æ ˆ",-1)),e("div",We,[(c(!0),v(L,null,T(l.callstack,(d,f)=>(c(),v("div",{key:f,class:"stack-item"},g(d.name)+" ("+g(d.file)+":"+g(d.line)+") ",1))),128))])])])]))}});const De=W(xe,[["__scopeId","data-v-2a1a0dd3"]]),Fe={class:"git-panel"},Je={class:"toolbar"},Re=["disabled"],Ae=["disabled"],He={key:0,class:"changes"},Ge={class:"change-list"},Ke={class:"status"},ze={class:"file"},je={class:"checkbox"},qe=["onUpdate:modelValue"],Qe={key:1,class:"commit-form"},Xe={class:"form-actions"},Ye=["disabled"],Ze={class:"branch-info"},et={class:"branch"},tt=O({__name:"GitPanel",props:{ws:{}},setup(V){const l=V,o=b([]),d=b("main"),f=b(0),n=b(!1),s=b(""),_=K(()=>o.value.length>0),k=K(()=>o.value.some($=>$.staged)),r=$=>({modified:"ä¿®æ”¹",added:"æ–°å¢",deleted:"åˆ é™¤",renamed:"é‡å‘½å"})[$]||$,y=($,C={})=>{var M;(M=l.ws)==null||M.send(JSON.stringify({type:"git-command",command:$,args:C}))},w=()=>y("status"),m=()=>n.value=!0,i=()=>y("push"),p=()=>y("pull"),h=()=>{y("commit",{message:s.value,files:o.value.filter($=>$.staged).map($=>$.file)}),n.value=!1,s.value=""},U=()=>{n.value=!1,s.value=""},B=$=>{const C=$.detail;C.type==="git-status"&&(o.value=C.changes,d.value=C.branch,f.value=C.behind)};return x(()=>{window.addEventListener("bridge-message",B),w()}),R(()=>{window.removeEventListener("bridge-message",B)}),($,C)=>(c(),v("div",Fe,[e("div",Je,[e("button",{onClick:w},"åˆ·æ–°"),e("button",{onClick:m,disabled:!_.value},"æäº¤",8,Re),e("button",{onClick:i,disabled:!k.value},"æ¨é€",8,Ae),e("button",{onClick:p},"æ‹‰å–")]),_.value?(c(),v("div",He,[C[1]||(C[1]=e("h4",null,"æ›´æ”¹",-1)),e("div",Ge,[(c(!0),v(L,null,T(o.value,M=>(c(),v("div",{key:M.file,class:P(["change-item",M.status])},[e("span",Ke,g(r(M.status)),1),e("span",ze,g(M.file),1),e("label",je,[S(e("input",{type:"checkbox","onUpdate:modelValue":D=>M.staged=D},null,8,qe),[[A,M.staged]])])],2))),128))])])):I("",!0),n.value?(c(),v("div",Qe,[S(e("textarea",{"onUpdate:modelValue":C[0]||(C[0]=M=>s.value=M),placeholder:"è¾“å…¥æäº¤ä¿¡æ¯...",rows:"3"},null,512),[[N,s.value]]),e("div",Xe,[e("button",{onClick:U},"å–æ¶ˆ"),e("button",{onClick:h,disabled:!s.value.trim()}," ç¡®è®¤æäº¤ ",8,Ye)])])):I("",!0),e("div",Ze,[e("span",et,g(d.value),1),e("span",{class:P(["sync-status",{behind:f.value>0}])},g(f.value?`è½å ${f.value} ä¸ªæäº¤`:"å·²åŒæ­¥"),3)])]))}});const st=W(tt,[["__scopeId","data-v-ecdf0bc8"]]),ot={class:"copilot-panel"},lt={class:"chat-container"},nt={class:"avatar"},at={class:"content"},it={key:0,class:"code-block"},dt=["innerHTML"],rt={class:"input-area"},ut={class:"context-selector"},ct={class:"editor"},vt=["placeholder","onKeydown"],pt={class:"actions"},mt=["disabled"],ft=O({__name:"CopilotPanel",props:{ws:{}},setup(V){const l=V,o=b(""),d=b("chat"),f=b(null),n=b([]);let s=0;const _=()=>({chat:"è¾“å…¥é—®é¢˜æˆ–æè¿°...",completion:"è¾“å…¥ä»£ç å‰ç¼€ï¼ŒAIå°†å¸®ä½ å®Œæˆ...",explain:"ç²˜è´´éœ€è¦è§£é‡Šçš„ä»£ç ...",refactor:"ç²˜è´´éœ€è¦é‡æ„çš„ä»£ç ..."})[d.value],k=i=>i.replace(/\n/g,"<br>"),r=async()=>{await q(),f.value&&(f.value.scrollTop=f.value.scrollHeight)},y=()=>{var p;if(!o.value.trim())return;const i={id:++s,role:"user",content:o.value};n.value.push(i),(p=l.ws)==null||p.send(JSON.stringify({type:"copilot-request",context:d.value,content:o.value})),o.value="",r()},w=()=>{n.value=[]},m=i=>{const p=i.detail;p.type==="copilot-response"&&(n.value.push({id:++s,role:"assistant",content:p.content,code:p.code}),r())};return x(()=>{window.addEventListener("bridge-message",m)}),R(()=>{window.removeEventListener("bridge-message",m)}),(i,p)=>(c(),v("div",ot,[e("div",lt,[e("div",{class:"messages",ref_key:"messagesRef",ref:f},[(c(!0),v(L,null,T(n.value,h=>(c(),v("div",{key:h.id,class:P(["message",h.role])},[e("div",nt,g(h.role==="user"?"ğŸ‘¤":"ğŸ¤–"),1),e("div",at,[h.code?(c(),v("pre",it,g(h.code),1)):(c(),v("div",{key:1,class:"text",innerHTML:k(h.content)},null,8,dt))])],2))),128))],512)]),e("div",rt,[e("div",ut,[S(e("select",{"onUpdate:modelValue":p[0]||(p[0]=h=>d.value=h)},p[2]||(p[2]=[e("option",{value:"chat"},"æ™®é€šå¯¹è¯",-1),e("option",{value:"completion"},"ä»£ç è¡¥å…¨",-1),e("option",{value:"explain"},"ä»£ç è§£é‡Š",-1),e("option",{value:"refactor"},"ä»£ç é‡æ„",-1)]),512),[[Q,d.value]])]),e("div",ct,[S(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=h=>o.value=h),placeholder:_(),onKeydown:j(H(y,["ctrl"]),["enter"])},null,40,vt),[[N,o.value]])]),e("div",pt,[e("button",{onClick:w},"æ¸…ç©ºå¯¹è¯"),e("button",{onClick:y,disabled:!o.value.trim()}," å‘é€ (Ctrl+Enter) ",8,mt)])])]))}});const gt=W(ft,[["__scopeId","data-v-540de0af"]]),_t={class:"vscode-bridge"},bt={class:"bridge-header"},yt={class:"bridge-content"},ht={class:"main-grid"},kt={class:"left-panel"},wt={class:"features-panel card"},Ct={class:"features-grid compact"},$t={key:0,class:"feature-panel card"},St={class:"feature-header"},Mt={key:1,class:"connection-log card"},Pt={class:"log-content"},Vt={class:"right-panel"},Et={class:"setup-guide card"},Lt={class:"download-section compact"},Tt={class:"connection-settings card"},Ut={class:"connection-mode"},It=["disabled"],Bt=["disabled"],Nt={key:0,class:"form-group"},Ot={class:"input-group"},Wt=["disabled"],xt=["disabled"],Dt={key:1,class:"form-group"},Ft=["disabled"],Jt=["disabled"],Rt={key:0,class:"vscode-select"},At=["value"],Ht={class:"form-group"},Gt=["disabled"],Kt={class:"settings-grid"},zt={class:"form-group checkbox"},jt={class:"form-group checkbox"},qt={class:"action-buttons"},Qt=["disabled"],Xt=["disabled"],Yt=O({__name:"VSCodeBridge",setup(V){const l=b(!1),o=b(!1),d=b(!0),f=b([]),n=(a,t="info")=>{f.value.unshift({type:t,message:a}),f.value.length>50&&f.value.pop()};let s=null;const _=b({files:!1,terminal:!1,debug:!1,git:!1,copilot:!1}),k=b(null),r=b({wsUrl:"ws://192.168.31.97:3008",port:3008,autoConnect:!1,ssl:!1,remoteMode:!1,remoteUrl:"ws://coder.zokoko.cn/ws",remoteToken:"mindcode-admin-2024",targetVSCode:""}),y=b([]),w=()=>{s&&s.send(JSON.stringify({type:"get-vscode-list"}))},m=async()=>{if(!r.value.remoteUrl||!r.value.remoteToken){n("è¯·è¾“å…¥è¿œç¨‹åœ°å€å’Œè®¿é—®ä»¤ç‰Œ","error");return}o.value=!0,n("æ­£åœ¨è¿æ¥è¿œç¨‹æœåŠ¡...");try{const a=`mobile-${Math.random().toString(36).slice(2,9)}`,t=new URL(r.value.remoteUrl);t.searchParams.append("clientId",a),t.searchParams.append("token",r.value.remoteToken),s=new WebSocket(t.toString()),s.addEventListener("open",()=>{console.log("WebSocketè¿æ¥å·²æ‰“å¼€"),n("è¿æ¥æˆåŠŸï¼Œç­‰å¾…è®¤è¯...","info"),s.send(JSON.stringify({type:"auth",clientId:a,token:r.value.remoteToken}))}),s.addEventListener("message",u=>{try{const E=JSON.parse(u.data);switch(console.log("æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯:",E),E.type){case"auth-success":l.value=!0,o.value=!1,n("è®¤è¯æˆåŠŸ","success"),w();break;case"auth-failed":n(`è®¤è¯å¤±è´¥: ${E.message}`,"error"),s==null||s.close();break;case"vscode-list":y.value=E.instances||[],y.value.length>0&&n(`å‘ç° ${y.value.length} ä¸ªVSCodeå®ä¾‹`);break;case"file-content":case"files-list":case"terminal-output":window.dispatchEvent(new CustomEvent("bridge-message",{detail:E}));break;case"error":n(E.message,"error");break}}catch(E){console.error("æ¶ˆæ¯å¤„ç†é”™è¯¯:",E)}}),s.addEventListener("close",()=>{l.value=!1,o.value=!1,s=null,n("è¿æ¥å·²æ–­å¼€","warn")}),s.addEventListener("error",u=>{console.error("WebSocketé”™è¯¯:",u),n("è¿æ¥é”™è¯¯: "+(u.message||"æœªçŸ¥é”™è¯¯"),"error"),o.value=!1})}catch(a){console.error("è¿æ¥å¤±è´¥:",a),n(`è¿æ¥å¤±è´¥: ${a.message}`,"error"),o.value=!1}},i=async()=>{try{if(r.value.remoteMode){const a=new WebSocket(r.value.remoteUrl);a.onopen=()=>{n("è¿œç¨‹æœåŠ¡å™¨è¿æ¥æµ‹è¯•æˆåŠŸ","success"),a.close()},a.onerror=()=>{n("è¿œç¨‹æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥","error")}}else{const a=new WebSocket(r.value.wsUrl);a.onopen=()=>{n("æœ¬åœ°æœåŠ¡å™¨è¿æ¥æµ‹è¯•æˆåŠŸ","success"),a.close()},a.onerror=()=>{n("æœ¬åœ°æœåŠ¡å™¨è¿æ¥æµ‹è¯•å¤±è´¥","error")}}}catch(a){n(`è¿æ¥æµ‹è¯•å¤±è´¥: ${a.message}`,"error")}},p=()=>{l.value?ee():r.value.remoteMode?m():h()},h=()=>{if(!s){o.value=!0,n("æ­£åœ¨è¿æ¥...");try{let a=r.value.wsUrl;!a.startsWith("ws://")&&!a.startsWith("wss://")&&(a=`ws://${a}`),s=new WebSocket(a);const t=setTimeout(()=>{(s==null?void 0:s.readyState)!==WebSocket.OPEN&&(s==null||s.close(),s=null,o.value=!1,n("è¿æ¥è¶…æ—¶","error"))},1e4);s.onopen=()=>{clearTimeout(t),l.value=!0,o.value=!1,n("è¿æ¥æˆåŠŸ","success"),s.send(JSON.stringify({type:"init",client:"mobile",clientId:`mobile-${Math.random().toString(36).slice(2,9)}`})),M()},s.onclose=u=>{clearTimeout(t),D(),l.value=!1,o.value=!1,s=null,n(`è¿æ¥å·²æ–­å¼€ (code: ${u.code})`,"warn"),r.value.autoConnect&&!isManualClose&&setTimeout(()=>{l.value||h()},5e3)},s.onerror=u=>{n(`è¿æ¥é”™è¯¯: ${u}`,"error")},s.onmessage=te}catch(a){n(`è¿æ¥å¤±è´¥: ${a.message}`,"error"),o.value=!1,s=null}}},U=a=>{if(!l.value||!s){n("è¯·å…ˆè¿æ¥ Bridge æœåŠ¡","warn");return}if(r.value.remoteMode&&!r.value.targetVSCode){n("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªVSCodeå®ä¾‹","warn");return}k.value&&B({type:"close-feature",feature:k.value}),k.value=a,B({type:"open-feature",feature:a}),n(`æ­£åœ¨æ‰“å¼€ ${a} åŠŸèƒ½...`)},B=a=>{if(console.log("å‘é€æ¶ˆæ¯0:",a),!s||s.readyState!==WebSocket.OPEN){n("WebSocketæœªè¿æ¥","error");return}try{const t={...a,source:r.value.remoteMode?"remote":"local"};r.value.remoteMode?s.send(JSON.stringify({type:"message",targetId:r.value.targetVSCode,payload:t})):s.send(JSON.stringify(t)),console.log("å‘é€æ¶ˆæ¯1:",t)}catch(t){n(`å‘é€æ¶ˆæ¯å¤±è´¥: ${t.message}`,"error")}},$=a=>{B(a)};let C=null;const M=()=>{D(),C=window.setInterval(()=>{B({type:"ping"})},3e4)},D=()=>{C&&(clearInterval(C),C=null)},ee=()=>{s&&(isManualClose=!0,D(),s.close(),s=null,l.value=!1,n("å·²æ–­å¼€è¿æ¥"))},te=a=>{try{const t=JSON.parse(a.data);switch(t.type){case"pong":break;case"ready":_.value=t.features||{},n("æœåŠ¡å™¨å°±ç»ª","success");break;case"error":n(t.message,"error");break;case"files-list":case"file-content":case"terminal-output":case"debug-event":window.dispatchEvent(new CustomEvent("bridge-message",{detail:t}));break}}catch(t){console.error("æ¶ˆæ¯å¤„ç†é”™è¯¯:",t)}},se=a=>({files:"æ–‡ä»¶åŒæ­¥",terminal:"ç»ˆç«¯è®¿é—®",debug:"æ–­ç‚¹è°ƒè¯•",git:"Gitæ“ä½œ",copilot:"AI åŠ©æ‰‹"})[a]||"",G=a=>({files:F(_e),terminal:F(Ce),debug:F(De),git:F(st),copilot:F(gt)})[a]||null,oe=()=>{k.value&&s&&s.send(JSON.stringify({type:"close-feature",feature:k.value})),k.value=null};return x(()=>{window.addEventListener("ws-message",a=>{s&&s.readyState===WebSocket.OPEN?(console.log("å‘é€WebSocketæ¶ˆæ¯:",a.detail),s.send(JSON.stringify(a.detail))):(console.warn("WebSocketæœªè¿æ¥ï¼Œæ— æ³•å‘é€æ¶ˆæ¯"),n("WebSocketæœªè¿æ¥ï¼Œæ— æ³•å‘é€æ¶ˆæ¯","warn"))}),r.value.autoConnect&&h()}),R(()=>{s&&s.close()}),(a,t)=>(c(),v("div",_t,[e("div",bt,[t[17]||(t[17]=e("h2",null,"VSCode åŠ©æ‰‹",-1)),e("div",{class:P(["connection-status",{connected:l.value}])},g(l.value?"å·²è¿æ¥":"æœªè¿æ¥"),3)]),e("div",yt,[e("div",ht,[e("div",kt,[e("div",wt,[t[28]||(t[28]=e("h3",null,"å¯ç”¨åŠŸèƒ½",-1)),e("div",Ct,[e("div",{class:"feature-item",onClick:t[0]||(t[0]=u=>U("files"))},[t[18]||(t[18]=e("div",{class:"feature-icon"},"ğŸ“",-1)),t[19]||(t[19]=e("div",{class:"feature-info"},[e("h4",null,"æ–‡ä»¶åŒæ­¥"),e("p",null,"å®æ—¶åŒæ­¥æœ¬åœ°æ–‡ä»¶")],-1)),e("div",{class:P(["feature-status",{active:_.value.files}])},g(_.value.files?"å·²åŒæ­¥":"æœªåŒæ­¥"),3)]),e("div",{class:"feature-item",onClick:t[1]||(t[1]=u=>U("terminal"))},[t[20]||(t[20]=e("div",{class:"feature-icon"},"ğŸ’»",-1)),t[21]||(t[21]=e("div",{class:"feature-info"},[e("h4",null,"ç»ˆç«¯è®¿é—®"),e("p",null,"è¿œç¨‹æ‰§è¡Œå‘½ä»¤")],-1)),e("div",{class:P(["feature-status",{active:_.value.terminal}])},g(_.value.terminal?"å·²è¿æ¥":"æœªè¿æ¥"),3)]),e("div",{class:"feature-item",onClick:t[2]||(t[2]=u=>U("debug"))},[t[22]||(t[22]=e("div",{class:"feature-icon"},"ğŸ”",-1)),t[23]||(t[23]=e("div",{class:"feature-info"},[e("h4",null,"æ–­ç‚¹è°ƒè¯•"),e("p",null,"è¿œç¨‹è°ƒè¯•æ”¯æŒ")],-1)),e("div",{class:P(["feature-status",{active:_.value.debug}])},g(_.value.debug?"å·²å°±ç»ª":"æœªå¯ç”¨"),3)]),e("div",{class:"feature-item",onClick:t[3]||(t[3]=u=>U("git"))},[t[24]||(t[24]=e("div",{class:"feature-icon"},"ğŸ“¦",-1)),t[25]||(t[25]=e("div",{class:"feature-info"},[e("h4",null,"Git æ“ä½œ"),e("p",null,"ç‰ˆæœ¬æ§åˆ¶ç®¡ç†")],-1)),e("div",{class:P(["feature-status",{active:_.value.git}])},g(_.value.git?"å·²è¿æ¥":"æœªè¿æ¥"),3)]),e("div",{class:"feature-item",onClick:t[4]||(t[4]=u=>U("copilot"))},[t[26]||(t[26]=e("div",{class:"feature-icon"},"ğŸ¤–",-1)),t[27]||(t[27]=e("div",{class:"feature-info"},[e("h4",null,"AI åŠ©æ‰‹"),e("p",null,"ä½¿ç”¨ VSCode AI è¾…åŠ©ç¼–ç¨‹")],-1)),e("div",{class:P(["feature-status",{active:_.value.copilot}])},g(_.value.copilot?"å·²è¿æ¥":"æœªè¿æ¥"),3)])])]),k.value?(c(),v("div",$t,[e("div",St,[e("h3",null,g(se(k.value)),1),e("button",{class:"close-btn",onClick:oe},"Ã—")]),G(k.value)?(c(),X(Z(G(k.value)),{key:0,ws:Y(s),onMessage:$},null,40,["ws"])):I("",!0)])):I("",!0),d.value?(c(),v("div",Mt,[t[29]||(t[29]=e("h3",null,"è¿æ¥æ—¥å¿—",-1)),e("div",Pt,[(c(!0),v(L,null,T(f.value,(u,E)=>(c(),v("div",{key:E,class:P(u.type)},g(u.message),3))),128))])])):I("",!0)]),e("div",Vt,[e("div",Et,[t[30]||(t[30]=e("h3",null,"è®¾ç½®æŒ‡å—",-1)),t[31]||(t[31]=e("div",{class:"guide-steps compact"},[e("ol",null,[e("li",null,"ä¸‹è½½å¹¶å®‰è£… MindCode Bridge æ¡Œé¢ç¨‹åº"),e("li",null,"è¿è¡Œ MindCode Bridge ç¨‹åºï¼ˆå»ºè®®ç›‘å¬ 0.0.0.0 æˆ–æœ¬æœºå±€åŸŸç½‘IPï¼‰"),e("li",null,"åœ¨VSCodeä¸­å®‰è£… MindCode Bridge æ’ä»¶"),e("li",null,"ç¡®ä¿æœ¬åœ°BridgeæœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆé»˜è®¤ç«¯å£3008ï¼‰"),e("li",null,"æ‰‹æœºå’Œç”µè„‘éœ€åœ¨åŒä¸€WiFi/å±€åŸŸç½‘ä¸‹")])],-1)),e("div",Lt,[e("a",{href:"#",class:"download-btn",onClick:t[5]||(t[5]=H((...u)=>a.downloadBridge&&a.downloadBridge(...u),["prevent"]))}," ä¸‹è½½ Bridge ç¨‹åº "),e("a",{href:"#",class:"download-btn",onClick:t[6]||(t[6]=H((...u)=>a.downloadVSCodeExt&&a.downloadVSCodeExt(...u),["prevent"]))}," è·å– VSCode æ’ä»¶ ")])]),e("div",Tt,[t[42]||(t[42]=e("h3",null,"è¿æ¥é…ç½®",-1)),e("div",Ut,[e("label",null,[S(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=u=>r.value.remoteMode=u),value:!1,disabled:l.value},null,8,It),[[z,r.value.remoteMode]]),t[32]||(t[32]=J(" å±€åŸŸç½‘è¿æ¥ "))]),e("label",null,[S(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=u=>r.value.remoteMode=u),value:!0,disabled:l.value},null,8,Bt),[[z,r.value.remoteMode]]),t[33]||(t[33]=J(" è¿œç¨‹è¿æ¥ "))])]),r.value.remoteMode?(c(),v("div",Dt,[t[37]||(t[37]=e("label",null,"è¿œç¨‹æœåŠ¡åœ°å€",-1)),S(e("input",{"onUpdate:modelValue":t[11]||(t[11]=u=>r.value.remoteUrl=u),placeholder:"wss://your-remote-server.com",disabled:l.value},null,8,Ft),[[N,r.value.remoteUrl]]),t[38]||(t[38]=e("label",null,"è®¿é—®ä»¤ç‰Œ",-1)),S(e("input",{"onUpdate:modelValue":t[12]||(t[12]=u=>r.value.remoteToken=u),type:"password",placeholder:"è¾“å…¥è®¿é—®ä»¤ç‰Œ",disabled:l.value},null,8,Jt),[[N,r.value.remoteToken]]),y.value.length>0?(c(),v("div",Rt,[t[36]||(t[36]=e("label",null,"é€‰æ‹©VSCodeå®ä¾‹",-1)),S(e("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>r.value.targetVSCode=u)},[t[35]||(t[35]=e("option",{value:""},"è¯·é€‰æ‹©VSCodeå®ä¾‹",-1)),(c(!0),v(L,null,T(y.value,u=>(c(),v("option",{key:u.id,value:u.id},g(u.name),9,At))),128))],512),[[Q,r.value.targetVSCode]])])):I("",!0)])):(c(),v("div",Nt,[t[34]||(t[34]=e("label",null,"WebSocket åœ°å€",-1)),e("div",Ot,[S(e("input",{"onUpdate:modelValue":t[9]||(t[9]=u=>r.value.wsUrl=u),placeholder:"ws://192.168.31.97:3008",disabled:l.value},null,8,Wt),[[N,r.value.wsUrl]]),e("button",{class:"scan-btn",onClick:t[10]||(t[10]=(...u)=>a.scanNetwork&&a.scanNetwork(...u)),disabled:l.value}," æ‰«æ ",8,xt)])])),e("div",Ht,[t[39]||(t[39]=e("label",null,"ç«¯å£",-1)),S(e("input",{"onUpdate:modelValue":t[14]||(t[14]=u=>r.value.port=u),type:"number",disabled:l.value},null,8,Gt),[[N,r.value.port]])]),e("div",Kt,[e("div",zt,[e("label",null,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=u=>r.value.autoConnect=u)},null,512),[[A,r.value.autoConnect]]),t[40]||(t[40]=J(" è‡ªåŠ¨è¿æ¥ "))])]),e("div",jt,[e("label",null,[S(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=u=>r.value.ssl=u)},null,512),[[A,r.value.ssl]]),t[41]||(t[41]=J(" ä½¿ç”¨ SSL "))])])]),e("div",qt,[e("button",{class:"test-btn",onClick:i,disabled:l.value||o.value}," æµ‹è¯•è¿æ¥ ",8,Qt),e("button",{class:P(["connect-btn",{connecting:o.value}]),onClick:p,disabled:o.value},g(l.value?"æ–­å¼€è¿æ¥":o.value?"è¿æ¥ä¸­...":"è¿æ¥"),11,Xt)])])])])])]))}});const Zt=W(Yt,[["__scopeId","data-v-25a44558"]]),es={class:"plugin-detail"},ts={key:1},ss={class:"content"},os={class:"plugin-header"},ls={class:"plugin-icon"},ns={class:"plugin-info"},as={class:"version"},is={class:"description"},ds=O({__name:"PluginDetail",setup(V){const l=ne(),o=le(),d=b(null),f=b(null),n={"vscode-bridge":Zt};return x(async()=>{var _;const s={"vscode-bridge":{id:"vscode-bridge",name:"VSCode Bridge",version:"1.0.0",description:"é€šè¿‡æœ¬åœ°BridgeæœåŠ¡è¿æ¥VSCode",icon:"ğŸ”—",component:"vscode-bridge"}};d.value=s[o.params.id],(_=d.value)!=null&&_.component&&(f.value=n[d.value.component])}),(s,_)=>(c(),v("div",es,[e("div",{class:"back",onClick:_[0]||(_[0]=k=>Y(l).back())},_[1]||(_[1]=[e("span",null,"â† è¿”å›",-1)])),d.value?(c(),v(L,{key:0},[f.value?(c(),X(Z(f.value),{key:0})):(c(),v("div",ts,[e("h2",null,g(d.value.name),1),e("div",ss,[e("div",os,[e("div",ls,g(d.value.icon),1),e("div",ns,[e("span",as,"v"+g(d.value.version),1),e("p",is,g(d.value.description),1)])])])]))],64)):I("",!0)]))}});const us=W(ds,[["__scopeId","data-v-96af3f17"]]);export{us as default};
